<!DOCTYPE html>
<html>
<head>
    

    

    


<!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- Baidu Push -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- End Baidu Push -->


    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    <meta name="baidu-site-verification" content="97dbRVWfVh" />
    <meta name="sogou_site_verification" content="AIePRXkUI4"/>
    
    
    <link rel="canonical" href="http://www.kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/">
    
    
    <title>Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？ | Kotlin | 简洁、优雅，100% 兼容 Java</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="NoArg,JavaBean">
    <meta name="description" content="问题出现前不久刚刚应小伙伴的要求拉了个 QQ 群：162452394 (微信群可以加我微信 enbandari，邀大家进群)，上周一的时候在公众号推送了之后一下子就热闹起来了。  话说有个哥们在群里面问了这么一个问题，他用 MyBatis 来接入数据库，有个实体类用 Kotlin 大概是这么写的： 1data class User (var id: Int, var username: Strin">
<meta name="keywords" content="NoArg,JavaBean">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？">
<meta property="og:url" content="http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/index.html">
<meta property="og:site_name" content="Kotlin">
<meta property="og:description" content="问题出现前不久刚刚应小伙伴的要求拉了个 QQ 群：162452394 (微信群可以加我微信 enbandari，邀大家进群)，上周一的时候在公众号推送了之后一下子就热闹起来了。  话说有个哥们在群里面问了这么一个问题，他用 MyBatis 来接入数据库，有个实体类用 Kotlin 大概是这么写的： 1data class User (var id: Int, var username: Strin">
<meta property="og:image" content="http://www.kotliner.cn/arts/e_group.png">
<meta property="og:image" content="http://www.kotliner.cn/assets/2017.3.27/kotlin扫码关注.png">
<meta property="og:image" content="http://www.kotliner.cn/arts/kotlin扫码关注.png">
<meta property="og:updated_time" content="2017-05-22T02:30:56.906Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？">
<meta name="twitter:description" content="问题出现前不久刚刚应小伙伴的要求拉了个 QQ 群：162452394 (微信群可以加我微信 enbandari，邀大家进群)，上周一的时候在公众号推送了之后一下子就热闹起来了。  话说有个哥们在群里面问了这么一个问题，他用 MyBatis 来接入数据库，有个实体类用 Kotlin 大概是这么写的： 1data class User (var id: Int, var username: Strin">
<meta name="twitter:image" content="http://www.kotliner.cn/arts/e_group.png">
    
        <link rel="alternative" href="/atom.xml" title="Kotlin" type="application/atom+xml">
    
    <link rel="shortcut icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.5.2">
    <script>window.lazyScripts=[]</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/assets/img/Kotlin-logo.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Kotlin</h5>
          <a href="mailto:kotlin@kotliner.cn" title="kotlin@kotliner.cn" class="mail">kotlin@kotliner.cn</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.kotlincn.net"  >
                <i class="icon icon-lg icon-certificate"></i>
                官网
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                所有文章
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/authors"  >
                <i class="icon icon-lg icon-user"></i>
                所有作者
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-info"></i>
                关于我们
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/beijing/"  >
                <i class="icon icon-lg icon-map-marker beijing"></i>
                北京分会
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/chengdu/"  >
                <i class="icon icon-lg icon-map-marker chengdu"></i>
                成都分会
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://shanghai.kotliner.cn"  >
                <i class="icon icon-lg icon-map-marker shanghai"></i>
                上海分会
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-03-27T01:26:47.000Z" itemprop="datePublished" class="page-time">
  2017-03-27
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/编程语言/">编程语言</a></li></ul>

            
        </h5>
    </div>

    

</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#问题出现"><span class="post-toc-text">问题出现</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#问题探究-①-——-Kotlin-的类型映射"><span class="post-toc-text">问题探究 ① —— Kotlin 的类型映射</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#问题探究-②-——-JavaBean-的无参构造"><span class="post-toc-text">问题探究 ② —— JavaBean 的无参构造</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#解决方案-①-——-我就用-Integer-了怎么着吧"><span class="post-toc-text">解决方案 ① —— 我就用 Integer 了怎么着吧</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#解决方案-②-——-kotlin-Int-什么时候映射为-Integer"><span class="post-toc-text">解决方案 ② —— kotlin.Int 什么时候映射为 Integer</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#解决方案-③-——-默认参数"><span class="post-toc-text">解决方案 ③ —— 默认参数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#解决方案-④-——-官方也认为有时候我们需要一个无参构造"><span class="post-toc-text">解决方案 ④ —— 官方也认为有时候我们需要一个无参构造</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#拓展延伸-——-不择手段创建实例"><span class="post-toc-text">拓展延伸 —— 不择手段创建实例</span></a></li></ol>
        </nav>
    </aside>
    

<article id="post-Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？</h1>
        <div class="post-meta">
            <time class="post-time" title="2017年03月27日 9:26" datetime="2017-03-27T01:26:47.000Z"  itemprop="datePublished">2017-03-27</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/编程语言/">编程语言</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="问题出现"><a href="#问题出现" class="headerlink" title="问题出现"></a>问题出现</h2><p>前不久刚刚应小伙伴的要求拉了个 QQ 群：162452394 (微信群可以加我微信 enbandari，邀大家进群)，上周一的时候在公众号推送了之后一下子就热闹起来了。</p>
<p><img src="/arts/e_group.png" width="250px"></p>
<p>话说有个哥们在群里面问了这么一个问题，他用 MyBatis 来接入数据库，有个实体类用 Kotlin 大概是这么写的：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>(<span class="keyword">var</span> id: <span class="built_in">Int</span>, <span class="keyword">var</span> username: String, <span class="keyword">var</span> age: <span class="built_in">Int</span>, <span class="keyword">var</span> passwd: String)</div></pre></td></tr></table></figure>
<p>它对应的数据库表是这样的：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> userinfo</div><div class="line">(</div><div class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">11</span>) PRIMARY <span class="keyword">KEY</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">    username <span class="built_in">VARCHAR</span>(<span class="number">45</span>),</div><div class="line">    age <span class="built_in">INT</span>(<span class="number">11</span>),</div><div class="line">    passwd <span class="built_in">VARCHAR</span>(<span class="number">45</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>字段顺序也都能对得上。</p>
<p>然后呢，他就配置了这么一条查询语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.println.kotlin.mybatis.UserMapper"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUser"</span> <span class="attr">resultType</span>=<span class="string">"net.println.kotlin.mybatis.User"</span>&gt;</span></div><div class="line">        select * from userinfo where id = #&#123;id&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></div></pre></td></tr></table></figure>
<p>对应的 UserMapper 代码如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</div><div class="line">    User selectUser(int id);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这一切看上去似乎一点儿毛病都没有哇，可一旦他调用 selectUser 方法之后，程序开始抱怨了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">No constructor found in net.println.kotlin.mybatis.User matching [java.lang.Integer, java.lang.String, java.lang.Integer, java.lang.String]</div></pre></td></tr></table></figure>
<p>啥问题呢？找不到构造方法。当时看到这个问题的时候正好手里有活，没有仔细看，周末特意照着写了个 demo，果然。。嗯。。居然找不到构造方法，这就有意思了。</p>
<h2 id="问题探究-①-——-Kotlin-的类型映射"><a href="#问题探究-①-——-Kotlin-的类型映射" class="headerlink" title="问题探究 ① —— Kotlin 的类型映射"></a>问题探究 ① —— Kotlin 的类型映射</h2><p>按理说，我们的 data class 是有构造方法的，说找不到构造方法倒也有些不公平，应该确切的说是找不到合适的构造方法。前面那句错误信息告诉我们 MyBatis 想要找的构造方法是下面的签名：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">init(java.lang.Integer, java.lang.String, java.lang.Integer, java.lang.String)</div></pre></td></tr></table></figure>
<p>我们的 data class 的构造方法呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">init(kotlin.Int, kotlin.String, kotlin.Int, kotlin.String)</div></pre></td></tr></table></figure>
<p>嗯，乍一看确实不一样哈，难怪找不到合适的构造方法。这样说对吗？我在之前有篇文章<a href="https://mp.weixin.qq.com/s?__biz=MzIzMTYzOTYzNA==&amp;mid=2247483762&amp;idx=1&amp;sn=c553cdd4b0bccd59e530a9f231037d73&amp;chksm=e8a05e4fdfd7d759a01eef26adae2ddf35f05f253e056490cc62972eda790f9601f23b2a8a23#rd" target="_blank" rel="external">为什么不直接使用 Array<int> 而是 IntArray ？</int></a>提到 过 Kotlin 的类型映射的问题，kotlin.String 编译之后毫无疑问的要映射成 java.lang.String，而 kotlin.Int 则有可能映射成 int 或是 java.lang.Integer，这么说来我们的 User 的构造方法签名可能是下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">init(<span class="keyword">int</span>, java.lang.String, <span class="keyword">int</span>, java.lang.String)</div></pre></td></tr></table></figure>
<p>也可能是这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">init(java.lang.Integer, java.lang.String, java.lang.Integer, java.lang.String)</div></pre></td></tr></table></figure>
<p>现在通过刚才报的错误来看，映射后的签名毫无疑问的应该是前面那种了，毕竟这里 Int 并没有装箱的需求，为了追求效率，映射成 int 是再合适不过的了。也正是这个原因，MyBatis 才无法找到它想要的构造方法，无法构造出 User 对象，最终导致程序运行失败。</p>
<h2 id="问题探究-②-——-JavaBean-的无参构造"><a href="#问题探究-②-——-JavaBean-的无参构造" class="headerlink" title="问题探究 ② —— JavaBean 的无参构造"></a>问题探究 ② —— JavaBean 的无参构造</h2><p>JavaBean 是一个很有意思的概念，刚刚接触这个概念的时候都有点儿不敢相信自己的耳朵，一个在 JavaEE 当中举足轻重的概念居然就只是一个有无参构造方法、属性通过 Getter 和 Setter 访问、可序列化和反序列化的 POJO，就这么简单？说实在的，当时真觉得 JavaBean 也没什么了不起的，就像最开始学牛二定律的时候一样，一个只有 4 个字符的定律，料它也不能把洒家怎样——可是实际上呢，它确实把我给怎样了。。</p>
<p>刚刚我们分析错误的时候，很直接的分析了构造方法为什么不匹配的原因，却没有想想为什么要找这个构造方法，试想，如果你用 Java 写这段代码，你肯定会写出类似下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</div><div class="line">	<span class="keyword">private</span> String username;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">	<span class="keyword">private</span> String passwd;</div><div class="line">	</div><div class="line">	... 省略 getter 和 setter </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果不纠结序列化的事儿，这个 User 就是个 JavaBean 是吧，你交给 MyBatis 使用的话也不会出现任何问题—— MyBatis 压根儿不需要找什么构造方法，因为人家根本不需要费那劲，有无参的默认构造方法的话，构造对象实例岂不是轻而易举？</p>
<p>对咯，MyBatis 其实想要的是一个 JavaBean，一个有默认无参构造方法的类，结果呢，你给人家塞了一个 data class 过去。。</p>
<h2 id="解决方案-①-——-我就用-Integer-了怎么着吧"><a href="#解决方案-①-——-我就用-Integer-了怎么着吧" class="headerlink" title="解决方案 ① —— 我就用 Integer 了怎么着吧"></a>解决方案 ① —— 我就用 Integer 了怎么着吧</h2><p>这个问题有一个最为直接的解决办法，那就是直接使用 Integer 而不是 kotlin.Int。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>(<span class="keyword">var</span> id: Integer, <span class="keyword">var</span> username: String, <span class="keyword">var</span> age: Integer, <span class="keyword">var</span> passwd: String)</div></pre></td></tr></table></figure>
<p>不过，你一旦这么写了，你就没办法在 Kotlin 当中正常实例化这个类了（在 Java 中可以实例化），所以这种方案堪比七伤拳啊：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> user = User(<span class="number">1</span>,<span class="string">"root"</span>, <span class="number">30</span>,<span class="string">""</span>) <span class="comment">//error : The integer literal does not conform to the expected type Integer</span></div></pre></td></tr></table></figure>
<h2 id="解决方案-②-——-kotlin-Int-什么时候映射为-Integer"><a href="#解决方案-②-——-kotlin-Int-什么时候映射为-Integer" class="headerlink" title="解决方案 ② —— kotlin.Int 什么时候映射为 Integer"></a>解决方案 ② —— kotlin.Int 什么时候映射为 Integer</h2><p>如果 kotlin.Int 能够映射成 java.lang.Integer，那么这问题就彻底解了。试想一下，什么情况下 int 不好使，非得用 Integer？</p>
<ul>
<li>整型作为泛型参数的时候</li>
<li>可以为 null</li>
</ul>
<p>这两种情况显而易见的需要 Integer 出马了，比如你想将一堆整数放入 ArrayList 当中，你只能这么搞：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ArrayList&lt;Integer&gt; integers = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">...</div></pre></td></tr></table></figure>
<p>还有一种就是整型值可能为 null 的时候，毕竟作为基本类型的 int 连默认值都是 0，怎么会为 null 呢？</p>
<p>回到我们的问题，如果能让 data class 的 Int 映射为 Integer，那么构造方法应该是妥妥的了：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>(<span class="keyword">var</span> id: <span class="built_in">Int</span>?, <span class="keyword">var</span> username: String, <span class="keyword">var</span> age: <span class="built_in">Int</span>?, <span class="keyword">var</span> passwd: String)</div></pre></td></tr></table></figure>
<p>我们把构造方法当中的 id 和 age 的类型做了修改，从不可为空的 Int 改为可为空的 Int？，这样编译之后就只好映射为 Integer了。</p>
<p>问题解决~</p>
<p>这个方案的优点就是几乎没有额外的依赖或者其他什么开销，只是后续编码时，你会总是被迫对 id、age 这几个属性进行是否为空的判断，这样看起来一点儿都不美。</p>
<h2 id="解决方案-③-——-默认参数"><a href="#解决方案-③-——-默认参数" class="headerlink" title="解决方案 ③ —— 默认参数"></a>解决方案 ③ —— 默认参数</h2><p>其实就像我们前面提到的，如果 User 这个类有个无参构造的话，后面查找其他构造方法的事儿就压根儿不会有。也就是说如果我们给 User 类加一个无参构造，这个问题也是可以解决的：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> id: <span class="built_in">Int</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> username: String</div><div class="line">    <span class="keyword">var</span> age: <span class="built_in">Int</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> passwd: String</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果这样写的话，我们就无法享受 data class 带来的书写便利了。。不过如果我们能够骗过 MyBatis 说我们这个类有无参构造，那么问题不就解决了？</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>(<span class="keyword">var</span> id: <span class="built_in">Int</span> = <span class="number">0</span>, <span class="keyword">var</span> username: String = <span class="string">""</span>, <span class="keyword">var</span> age: <span class="built_in">Int</span> = <span class="number">0</span>, <span class="keyword">var</span> passwd: String = <span class="string">""</span>)</div></pre></td></tr></table></figure>
<p>我们为每一个参数加了默认值， 这样编译出来之后，字节码当中就真的会看到有无参构造方法了：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> &lt;init&gt;()V</div><div class="line"> L0</div><div class="line">  ALOAD <span class="number">0</span> </div><div class="line">  ICONST_0</div><div class="line">  ACONST_NULL</div><div class="line">  ICONST_0</div><div class="line">  ACONST_NULL</div><div class="line">  BIPUSH <span class="number">15</span></div><div class="line">  ACONST_NULL</div><div class="line">  INVOKESPECIAL net/println/kotlin/mybatis/User.&lt;init&gt; (ILjava/lang/String;ILjava/lang/String;ILkotlin/jvm/<span class="keyword">internal</span>/DefaultConstructorMarker;)V</div><div class="line">  RETURN</div><div class="line"> L1</div><div class="line">  MAXSTACK = <span class="number">7</span></div><div class="line">  MAXLOCALS = <span class="number">1</span></div></pre></td></tr></table></figure>
<p>实际上我们也可以通过反射来获得到这个无参的构造方法，也正是因为如此，我们也可以直接用 newInstance 方法来构造 User 实例：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">User::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>.<span class="title">newInstance</span></span>()</div></pre></td></tr></table></figure>
<p>既然有了无参构造方法，MyBatis 就不需要绞尽脑汁还要找其他的构造方法，于是问题解决~</p>
<p>这个方案的优点是，比较简单，也没有上一个方案那样的副作用；缺点就是，万一某一个属性没有默认值，你该给它设置什么呢？</p>
<h2 id="解决方案-④-——-官方也认为有时候我们需要一个无参构造"><a href="#解决方案-④-——-官方也认为有时候我们需要一个无参构造" class="headerlink" title="解决方案 ④ —— 官方也认为有时候我们需要一个无参构造"></a>解决方案 ④ —— 官方也认为有时候我们需要一个无参构造</h2><p>早在 1.0.6 发版的时候，官方就增加了对无参构造的一种另类支持，即 noarg 插件。Kotlin 原本不需要这么做，但考虑到它与 Java 解不开理还乱的关系，Java 支持的一切代码的写法 Kotlin 也似乎有责任和义务来完全支持了。</p>
<p>这个方法其实是 Kotlin 编译插件在编译器通过字节码织入的方式向 class 文件中写入了一个无参构造方法，这个构造方法由于出现的时间比较晚，我们无法在代码中引用到它，不过却可以通过反射访问到它，这样就即保证了 Kotlin 的初心不变，如果你愿意用 data class 或者类似的实体类，那么你就要按照 Kotlin 的要求妥善处理好它的成员的初始化，也方便了一些框架的“出格”行为，显然一个聪明的框架需要对代码本身有足够的理解，对编码人员的限制对于框架本身来说就显得没有那么的重要了。</p>
<p>如果你遇到了这样的问题，我当然建议你采用官方的这个解决方案，原因很简单，除了要写一个注解之外，几乎没有任何副作用，另外，官方支持的方案自然也比较有保障啦。</p>
<h2 id="拓展延伸-——-不择手段创建实例"><a href="#拓展延伸-——-不择手段创建实例" class="headerlink" title="拓展延伸 —— 不择手段创建实例"></a>拓展延伸 —— 不择手段创建实例</h2><p>说起来我就要批评一下 MyBatis 了，一点儿都不如 Gson 流氓。我们前面虽然没有细说，不过大家基本上可以知道 MyBatis 是如何创建返回结果的实例的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">private</span> Object <span class="title">createResultObject</span><span class="params">(ResultSetWrapper rsw, ResultMap resultMap, List&lt;Class&lt;?&gt;&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs, String columnPrefix)</span></span></div><div class="line">     <span class="keyword">throws</span> SQLException &#123;</div><div class="line">...</div><div class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (resultType.isInterface() || metaType.hasDefaultConstructor()) &#123;</div><div class="line">     <span class="comment">//有无参构造方法的话走的是这个分支</span></div><div class="line">     <span class="keyword">return</span> objectFactory.create(resultType);</div><div class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shouldApplyAutomaticMappings(resultMap, <span class="keyword">false</span>)) &#123;</div><div class="line">     <span class="comment">//在这里查找与表结构匹配的构造方法，我们之前遇到的错误就在这个方法当中抛出</span></div><div class="line">     <span class="keyword">return</span> createByConstructorSignature(rsw, resultType, constructorArgTypes, constructorArgs, columnPrefix);</div><div class="line">   &#125;</div><div class="line">   ...</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>我们看到如果没有找到匹配的构造方法，也没有无参的构造方法，MyBatis 就叹了一口气，放弃了。这样的事情如果交给 Gson，你就会发现完全不一样。我曾在<a href="https://mp.weixin.qq.com/s?__biz=MzIzMTYzOTYzNA==&amp;mid=2247483683&amp;idx=1&amp;sn=41ca82c89ddccaf61a9c734e5976a62b&amp;chksm=e8a05e1edfd7d7086b84db34640043054b2288cc5e45bdc300cfab2ce16ffb84c66438a16dca#rd" target="_blank" rel="external">12 Json数据引发的血案</a>这一期当中介绍过 Gson 如何创建实例，它甚至可以让 Kotlin 的不可空类型“赋值”为 null，原因很简单，它在实例化对象的时候也跟 MyBatis 一样，先去找无参构造，找不到就用 Unsafe.allocateInstance 来创建对象，主要这个创建方法非常的底层，你可以简单的理解为只为实例化出来的 Java 对象开辟了对象存续需要的空间，而对应地它的成员没有一个会正常初始化。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</div><div class="line">    init &#123;</div><div class="line">        println(<span class="string">"init"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">companion</span> <span class="keyword">object</span>&#123;</div><div class="line">        init &#123;</div><div class="line">            println(<span class="string">"cinit"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意到这段代码，cinit 将在 Test 类加载时打印，init 将在 Test 实例化时打印。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> field = Unsafe::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>.<span class="title">getDeclaredField</span></span>(<span class="string">"theUnsafe"</span>)</div><div class="line">field.isAccessible = <span class="literal">true</span></div><div class="line"><span class="keyword">val</span> unsafe = field.<span class="keyword">get</span>(<span class="literal">null</span>) <span class="keyword">as</span> Unsafe</div><div class="line">unsafe.allocateInstance(Test::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></div></pre></td></tr></table></figure>
<p>我们运行这样的程序，结果只有 cinit，难怪人家叫 Unsafe，都告诉你 Unsafe 了你还想要什么。。</p>
<p>不过这在 C++ 当中，简直不叫事儿，不信给你看一段代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getNum</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">checkNum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b = <span class="number">0</span>)</span></span>;</div><div class="line">&#125;;</div><div class="line">...</div><div class="line"><span class="keyword">int</span> Hello::getNum() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">12310</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">...</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; ((Hello*)<span class="number">0</span>)-&gt;getNum() &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们把一个 0 强转为 Hello 类型的指针，接着还调用人家的函数 getNum，结果你猜怎么着？运行结果还是对的！</p>
<p>如果你经常接触 Jni，你也经常会把 native 的指针传给 Java，Java 拿到的其实就是一个 long 类型的数，等 Java 需要调用 native 代码的时候，你就会发现这个整数传给 native 层会首先被 reinterpret_cast。</p>
<p>这有什么稀罕的，反正你创建的类也好，对象也好，最终都是数，严格的语法限制也不过是编译器给我们盖起的围墙，你通过围墙来保护你自己，同时也让围墙遮挡了你的眼睛。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/assets/2017.3.27/kotlin扫码关注.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/arts/kotlin扫码关注.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-05-22T02:30:56.906Z" itemprop="dateUpdated">2017年5月22日 10:30</time>
</span><br>


        
        转载请注明出处：<a href="/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/ " target="_blank" rel="external">http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/</a>
        
    </div>
    <footer>
        <div>
            <a href="/authors/bennyhuo/">
                
                <img src="/assets/img/Kotlin-logo.png" alt="Kotlin">
                
                bennyhuo
                
            </a>
            
        </div>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaBean/">JavaBean</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NoArg/">NoArg</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/&title=《Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？》 — Kotlin&pic=http://www.Kotliner.cn/assets/img/Kotlin-logo.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/&title=《Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？》 — Kotlin&source=Kotlin 是一门由 JetBrains 公司开发的运行在 JVM、Android、前端的静态语言，它 100% 兼容 Java，并且开始逐步支持 Na..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？》 — Kotlin&url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/&via=http://www.Kotliner.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/04/03/Kotlin 兼容 Java 遇到的最大的坑 /" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Kotlin 兼容 Java 遇到的最大的坑</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/03/21/Kotlin 1.1 Event in Your City/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">[译]Kotlin 1.1 Event in Your City</h4>
      </a>
    </div>
  
</nav>



    










<div class="comments" id="comments">
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
</div>
<script>
    var cloudTieConfig = {
        url: document.location.href,
        sourceId: "",
        productKey: "0263eabe3b1b46709556eda1c39750be",
        target: "cloud-tie-wrapper"
    };
</script>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        Have a nice Kotlin!
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        
        
        <li>
            <img src="/assets/img/wechat.jpg" title="微信打赏二维码" alt="微信打赏二维码">
            <p>微信</p>
        </li>
        

        
        <li>
            <img src="/assets/img/alipay.jpg" title="支付宝打赏二维码" alt="支付宝打赏二维码">
            <p>支付宝</p>
        </li>
        
    </ul>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            <span>博客内容遵循 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span class="copyright-text">京ICP备16022265号-2&nbsp;</span>
            <span>Kotlin &copy; 2017</span>
        </p>
        <p>
            本站由<a style="display:inline" href="https://account.ucloud.cn/cas/register?utm_source=kotliner&utm_medium=content_pic_pc&utm_campaign=zanzhu&ytag=kotliner">UCloud 提供赞助 - 注册即送 50 元代金券</a>
        </p>
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/&title=《Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？》 — Kotlin&pic=http://www.Kotliner.cn/assets/img/Kotlin-logo.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/&title=《Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？》 — Kotlin&source=Kotlin 是一门由 JetBrains 公司开发的运行在 JVM、Android、前端的静态语言，它 100% 兼容 Java，并且开始逐步支持 Na..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错？》 — Kotlin&url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/&via=http://www.Kotliner.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.Kotliner.cn/2017/03/27/Kotlin 遇到 MyBatis：到底是 Int 的错，还是 data class 的错/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADNElEQVR42u3awW4iQQwE0Pz/T7PSnlbaQKrsQWI6b04Rgpl+jRTjcn99xdfj7/Xs9X+v/9//eHLl73z92Wdru+DCxsbGvgk7f8Drv5NtSp6b3+f1Rry+MzY2NvZ57NdL/+EWL5cyAyRlcvU1YGNjY/9KdruI/LMJuG1ssLGxsbGT+CYvbPmi8xKFjY2Njd2GSm3ZaGOmTTj1xiwNGxsb++PZ7eM/+e83zrexsbGxP5L9KK+kwLRtQztIuECBjY2NfRA7WXoeM82QSUF6R8yEjY2NfRJ7NoLdb1AbXbUxU1QIsbGxsW/Onj2g/dHfNjl5kNSWPWxsbOyz2XkJ2SxxX/Dy+/8QJ2FjY2Mfx06KSruUJBhKtmOzid+8go2NjX00uw3u8+h/VoQ2Q4Kna8bGxsY+jj2bJ+SRUFsaN/cvQiVsbGzsI9jJlUT/szLWth+bkllMvLGxsbFvxc6LTd4GtMUpHwnPYqan4wFsbGzsI9g5+B0HcWaA2RdWjHuxsbGxb8tuQ/ZNUbnquE/eCD0d92JjY2PfnH3tD/0koM8HD+2QoGiTsLGxsY9jb8ar7RbMClU+bI4+i42NjX0Q+6rofzP63bc37RgYGxsb+zx28q+/DYnaO7S82XZHbQk2Njb2rdizpqKtBcXel63LcA3Y2NjYB7GHP9/LYe0mDJqt6qsFYGNjY9+cnR+jTFqRWbg/K5P5HYozp9jY2Ni3ZedL38T6s1fy7S6OHGFjY2Mfwd6MUfOGJB8qbOKtpCnCxsbGPpWdx/ebwz2bgGk/YB7OnLGxsbFvws6bgfyz+ca1g+H8qlsRbGxs7Buy88KzJyWBUbLRbcHDxsbGPpvd/tPPj9psfvm3G5G3N9jY2NinsvdB/GwMkAf6m5bm4lM/2NjY2B/JnhWPomDEoX9eONth8De9FzY2NvYR7PzKm4eryuEmrpod+sHGxsa+Lztn5GH9ao/LEjV8FjY2NvZx7H3k1Ba2zYBhs33Y2NjYv5m9byfyMrkpma+jK2xsbGzsfeyeF63ZO6PPYmNjYx/HbuP+9uBjPgBov4Y2CMPGxsY+j70Z9Lbj2NnINn/WxQd3sLGxsT+d/QePLIGlgFSx2wAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };



lazyScripts.push('//s95.cnzz.com/z_stat.php?id=1261686164&web_id=1261686164')

</script>

<script src="/js/main.min.js?v=1.5.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.5.2" async></script>





<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'Kotlin 博客';
            clearTimeout(titleTime);
        } else {
            document.title = 'Kotlin 博客';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



</body>
</html>
